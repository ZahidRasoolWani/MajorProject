<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <title>AI Traffic Prediction - Bengaluru Traffic Insights</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,">

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        };
    </script>
</head>
<body class="bg-white text-[#181411] dark:bg-[#1a1a1a] dark:text-white transition-colors duration-300 overflow-x-hidden">
    <div class="min-h-screen flex flex-col bg-white dark:bg-[#1a1a1a] transition-colors duration-300" style='font-family: Inter, "Noto Sans", sans-serif;'>
        <div class="flex flex-col min-h-screen">
            <!-- Header -->
            <header class="flex items-center justify-between whitespace-nowrap border-b border-gray-300 dark:border-gray-600 px-10 py-3 shadow-sm bg-white dark:bg-[#1a1a1a] transition-colors duration-300">
                <div class="flex items-center gap-4 text-[#181411] dark:text-white">
                    <div class="size-4">
                        <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M12.0799 24L4 19.2479L9.95537 8.75216L18.04 13.4961L18.0446 4H29.9554L29.96 13.4961L38.0446 8.75216L44 19.2479L35.92 24L44 28.7521L38.0446 39.2479L29.96 34.5039L29.9554 44H18.0446L18.04 34.5039L9.95537 39.2479L4 28.7521L12.0799 24Z"
                                fill="currentColor"
                            ></path>
                        </svg>
                    </div>
                    <h2 class="text-[#181411] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]">Bengaluru Traffic Insights</h2>
                </div>
                <div class="flex flex-1 justify-end gap-8">
                    <div class="flex items-center gap-9">
                        <a class="text-[#181411] dark:text-white text-sm font-medium leading-normal hover:bg-gray-200 dark:hover:bg-gray-700 px-3 py-2 rounded-md transition-colors" href="/">Home</a>
                        <a class="text-[#181411] dark:text-white text-sm font-medium leading-normal hover:bg-gray-200 dark:hover:bg-gray-700 px-3 py-2 rounded-md transition-colors" href="pages/heatmap.html">Real-Time Traffic</a>
                        <a class="text-[#181411] dark:text-white text-sm font-medium leading-normal hover:bg-gray-200 dark:hover:bg-gray-700 px-3 py-2 rounded-md transition-colors" href="#" style="background-color: rgba(244, 135, 51, 0.1); color: #f48733;">Traffic Prediction</a>
                    </div>
                    <div class="flex items-center gap-4">
                        <!-- Explore Button + Dropdown -->
                        <div x-data="{ open: false }" class="relative">
                            <!-- Explore Button -->
                            <button
                                @click="open = !open"
                                class="flex items-center justify-center min-w-[84px] h-10 px-4 rounded-full bg-[#f48733] text-[#181411] text-sm font-bold tracking-[0.015em] transition-all duration-200 hover:bg-[#e37527] hover:shadow-md"
                            >
                                Explore
                                <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                                    viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>

                            <!-- Dropdown Menu -->
                            <div
                                x-show="open"
                                @click.outside="open = false"
                                x-transition
                                class="absolute left-0 mt-2 w-56 bg-white dark:bg-[#2a2a2a] border border-gray-200 dark:border-gray-600 rounded-md shadow-lg z-50"
                            >
                                <a href="/src/bmtc2.html" class="block px-4 py-2 text-sm text-[#181411] dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700">BMTC Bus</a>
                                <a href="/pages/bikeban.html" class="block px-4 py-2 text-sm text-[#181411] dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700">Bike Taxi Ban Analysis</a>
                                <a href="pages/vehicle2.html" class="block px-4 py-2 text-sm text-[#181411] dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700">Vehicle Analysis</a>
                                <a href="/pages/accident.html" class="block px-4 py-2 text-sm text-[#181411] dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700">Accident Analysis</a>
                                <a href="pages/map2.html" class="block px-4 py-2 text-sm text-sm text-[#181411] dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700">Station-wise Analysis</a>
                            </div>
                        </div>

                        <!-- Theme Toggle Button -->
                        <button
                            id="theme-toggle"
                            class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f5f2f0] dark:bg-[#2a2a2a] text-[#181411] dark:text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5 transition-colors duration-300 hover:bg-gray-200 dark:hover:bg-gray-600"
                        >
                            <svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                                <path id="sun-icon" d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm68,88a60,60,0,1,1-60-60A60.07,60.07,0,0,1,188,128Zm-16,0a44,44,0,1,0-44,44A44.05,44.05,0,0,0,172,128ZM58.34,69.66A8,8,0,0,1,69.66,58.34l16,16a8,8,0,0,1-11.32,11.32Zm0,116.68-16-16a8,8,0,0,1,11.32-11.32l16,16a8,8,0,0,1-11.32,11.32ZM192,72a8,8,0,0,1,5.66-2.34l16-16a8,8,0,0,1,11.32,11.32l-16,16A8,8,0,0,1,192,72Zm5.66,114.34a8,8,0,0,1-11.32,11.32l-16-16a8,8,0,0,1,11.32-11.32ZM48,128a8,8,0,0,1-8-8H16a8,8,0,0,1,0-16H40A8,8,0,0,1,48,128Zm80,80a8,8,0,0,1-8,8H104a8,8,0,0,1,0-16h16A8,8,0,0,1,128,208Zm112-88a8,8,0,0,1-8,8H216a8,8,0,0,1,0-16h16A8,8,0,0,1,240,120Z"></path>
                                <path id="moon-icon" class="hidden" d="M233.54,142.23a8,8,0,0,0-8-2A88.08,88.08,0,0,1,116.18,30.78a8,8,0,0,0-10.51-9.67A104.84,104.84,0,0,0,52.74,88,104,104,0,0,0,224,160a104.84,104.84,0,0,0,10.67-52.93A8,8,0,0,0,233.54,142.23ZM208,144a88,88,0,0,1-71.22,15.82q-2.85-.74-5.64-1.64A104.05,104.05,0,0,0,152,88a104.05,104.05,0,0,0-70.18-20.86q-.9-2.79-1.64-5.64A88,88,0,0,1,208,144Z"></path>
                            </svg>
                            <span id="theme-text">Theme</span>
                        </button>
                    </div>
                </div>
            </header>
            
            <!-- Main Content -->
            <main class="flex-1 px-0 w-full flex justify-center py-2 bg-white dark:bg-[#1a1a1a] transition-colors duration-300">
                <div class="flex flex-col w-full max-w-7xl mx-auto">
                    <!-- Main Prediction Interface -->
                    <div id="prediction-form" class="px-4">
                        <h2 class="text-center text-[#181411] dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em] pb-2 pt-3 transition-colors duration-300">AI Traffic Prediction System</h2>
                        <p class="text-center text-gray-600 dark:text-gray-400 text-base mb-6">Get real-time congestion predictions for Bengaluru roads with 99.2% accuracy using advanced machine learning</p>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- Input Form -->
                            <div class="flex h-full flex-1 flex-col gap-4 rounded-xl bg-white dark:bg-[#2a2a2a] shadow-[0_0_4px_rgba(0,0,0,0.1)] dark:shadow-[0_0_8px_rgba(0,0,0,0.3)] transition-colors duration-300">
                                <div class="p-4">
                                    <h3 class="text-xl font-bold text-[#181411] dark:text-white mb-4">Traffic Prediction Input</h3>
                                    
                                    <form id="predictionForm" class="space-y-4">
                                        <!-- Location Section -->
                                        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3">
                                            <h4 class="font-semibold text-blue-800 dark:text-blue-200 mb-2">Location Details</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <div>
                                                    <label class="block text-sm font-medium text-[#181411] dark:text-white mb-1">Area</label>
                                                    <select id="area" name="area" required class="w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-[#3a3a3a] text-[#181411] dark:text-white focus:ring-2 focus:ring-[#f48733]">
                                                        <option value="">Select Area</option>
                                                        <option value="BTM Layout">BTM Layout</option>
                                                        <option value="Banashankari">Banashankari</option>
                                                        <option value="Bannerghatta Road">Bannerghatta Road</option>
                                                        <option value="Basavanagudi">Basavanagudi</option>
                                                        <option value="Electronic City">Electronic City</option>
                                                        <option value="HSR Layout">HSR Layout</option>
                                                        <option value="Hebbal">Hebbal</option>
                                                        <option value="Indiranagar">Indiranagar</option>
                                                        <option value="JP Nagar">JP Nagar</option>
                                                        <option value="Jayanagar">Jayanagar</option>
                                                        <option value="Koramangala">Koramangala</option>
                                                        <option value="M.G. Road">M.G. Road</option>
                                                        <option value="Malleshwaram">Malleshwaram</option>
                                                        <option value="Marathahalli">Marathahalli</option>
                                                        <option value="RT Nagar">RT Nagar</option>
                                                        <option value="Rajajinagar">Rajajinagar</option>
                                                        <option value="Vijayanagar">Vijayanagar</option>
                                                        <option value="Whitefield">Whitefield</option>
                                                        <option value="Yelahanka">Yelahanka</option>
                                                        <option value="Yeshwanthpur">Yeshwanthpur</option>
                                                    </select>
                                                </div>
                                                
                                                <div>
                                                    <label class="block text-sm font-medium text-[#181411] dark:text-white mb-1">Road/Junction</label>
                                                    <select id="road" name="road" required class="w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-[#3a3a3a] text-[#181411] dark:text-white focus:ring-2 focus:ring-[#f48733]">
                                                        <option value="">Select Road</option>
                                                        <option value="100 Feet Road">100 Feet Road</option>
                                                        <option value="27th Main Road">27th Main Road</option>
                                                        <option value="Anil Kumble Circle">Anil Kumble Circle</option>
                                                        <option value="BTM 2nd Stage">BTM 2nd Stage</option>
                                                        <option value="Ballari Road">Ballari Road</option>
                                                        <option value="Banashankari Metro Station">Banashankari Metro Station</option>
                                                        <option value="Bannerghatta Road Main">Bannerghatta Road Main</option>
                                                        <option value="Bull Temple Road">Bull Temple Road</option>
                                                        <option value="CMH Road">CMH Road</option>
                                                        <option value="Chord Road">Chord Road</option>
                                                        <option value="Gandhi Bazaar">Gandhi Bazaar</option>
                                                        <option value="HSR Sector 1">HSR Sector 1</option>
                                                        <option value="Hebbal Flyover">Hebbal Flyover</option>
                                                        <option value="Hosur Road">Hosur Road</option>
                                                        <option value="ITPL Main Road">ITPL Main Road</option>
                                                        <option value="International Airport Road">International Airport Road</option>
                                                        <option value="JP Nagar Metro Station">JP Nagar Metro Station</option>
                                                        <option value="Jayanagar 4th Block">Jayanagar 4th Block</option>
                                                        <option value="Malleshwaram Circle">Malleshwaram Circle</option>
                                                        <option value="Marathahalli Junction">Marathahalli Junction</option>
                                                        <option value="Outer Ring Road">Outer Ring Road</option>
                                                        <option value="RT Nagar Main Road">RT Nagar Main Road</option>
                                                        <option value="Rajajinagar Metro Station">Rajajinagar Metro Station</option>
                                                        <option value="Sarjapur Road">Sarjapur Road</option>
                                                        <option value="Silk Board Junction">Silk Board Junction</option>
                                                        <option value="Sony World Junction">Sony World Junction</option>
                                                        <option value="Vijayanagar Metro Station">Vijayanagar Metro Station</option>
                                                        <option value="Yelahanka New Town">Yelahanka New Town</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Time Section -->
                                        <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-3">
                                            <h4 class="font-semibold text-green-800 dark:text-green-200 mb-2">Travel Time</h4>
                                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-3">
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="time_period" value="morning" class="sr-only peer">
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">◐</div>
                                                        <div class="text-xs font-medium">Morning</div>
                                                        <div class="text-xs opacity-75">6-10 AM</div>
                                                    </div>
                                                </label>
                                                
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="time_period" value="afternoon" class="sr-only peer" checked>
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">●</div>
                                                        <div class="text-xs font-medium">Afternoon</div>
                                                        <div class="text-xs opacity-75">12-5 PM</div>
                                                    </div>
                                                </label>
                                                
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="time_period" value="evening" class="sr-only peer">
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">◑</div>
                                                        <div class="text-xs font-medium">Evening</div>
                                                        <div class="text-xs opacity-75">5-9 PM</div>
                                                    </div>
                                                </label>
                                                
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="time_period" value="night" class="sr-only peer">
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">○</div>
                                                        <div class="text-xs font-medium">Night</div>
                                                        <div class="text-xs opacity-75">9 PM-6 AM</div>
                                                    </div>
                                                </label>
                                            </div>
                                            
                                            <div class="grid grid-cols-2 gap-2">
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="day_type" value="weekday" class="sr-only peer" checked>
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-sm mb-1">▦</div>
                                                        <div class="text-xs font-medium">Weekday</div>
                                                    </div>
                                                </label>
                                                
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="day_type" value="weekend" class="sr-only peer">
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-sm mb-1">◇</div>
                                                        <div class="text-xs font-medium">Weekend</div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>

                                        <!-- Conditions Section -->
                                        <div class="bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3">
                                            <h4 class="font-semibold text-yellow-800 dark:text-yellow-200 mb-2">Weather Conditions</h4>
                                            <div class="grid grid-cols-2 md:grid-cols-5 gap-2">
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="weather" value="Clear" class="sr-only peer" checked>
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">☀</div>
                                                        <div class="text-xs font-medium">Clear</div>
                                                    </div>
                                                </label>
                                                
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="weather" value="Rain" class="sr-only peer">
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">☔</div>
                                                        <div class="text-xs font-medium">Rainy</div>
                                                    </div>
                                                </label>
                                                
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="weather" value="Overcast" class="sr-only peer">
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">☁</div>
                                                        <div class="text-xs font-medium">Cloudy</div>
                                                    </div>
                                                </label>
                                                
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="weather" value="Fog" class="sr-only peer">
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">⚊</div>
                                                        <div class="text-xs font-medium">Foggy</div>
                                                    </div>
                                                </label>
                                                
                                                <label class="cursor-pointer">
                                                    <input type="radio" name="weather" value="Windy" class="sr-only peer">
                                                    <div class="p-2 text-center rounded-lg border-2 border-gray-200 peer-checked:border-[#f48733] peer-checked:bg-[#f48733] peer-checked:text-white transition-colors">
                                                        <div class="text-lg mb-1">◈</div>
                                                        <div class="text-xs font-medium">Windy</div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>

                                        <!-- Hidden inputs for backend -->
                                        <input type="hidden" id="traffic_volume" name="traffic_volume" value="">
                                        <input type="hidden" id="avg_speed" name="avg_speed" value="">
                                        <input type="hidden" id="road_capacity" name="road_capacity" value="">
                                        <input type="hidden" id="day_of_week" name="day_of_week" value="">

                                        <!-- Submit Button -->
                                        <button type="submit" class="w-full flex items-center justify-center px-4 py-3 bg-[#f48733] hover:bg-[#e37527] text-white font-bold rounded-lg transition-colors duration-200">
                                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                            Get Traffic Prediction
                                        </button>
                                    </form>
                                </div>
                            </div>

                            <!-- Results Panel -->
                            <div class="flex h-full flex-1 flex-col gap-4 rounded-xl bg-white dark:bg-[#2a2a2a] shadow-[0_0_4px_rgba(0,0,0,0.1)] dark:shadow-[0_0_8px_rgba(0,0,0,0.3)] transition-colors duration-300">
                                <div class="p-4">
                                    <h3 class="text-xl font-bold text-[#181411] dark:text-white mb-4">Prediction Results</h3>
                                    
                                    <div id="loading" class="hidden text-center py-8">
                                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#f48733]"></div>
                                        <p class="mt-2 text-gray-600 dark:text-gray-400">Analyzing traffic conditions...</p>
                                    </div>

                                    <div id="results" class="hidden">
                                        <!-- Prediction Display -->
                                        <div class="text-center mb-6">
                                            <div id="congestion-circle" class="mx-auto w-32 h-32 rounded-full border-8 flex items-center justify-center mb-4" style="border-color: #f48733;">
                                                <div class="text-center">
                                                    <div id="prediction-percentage" class="text-3xl font-bold text-[#181411] dark:text-white">--</div>
                                                    <div class="text-sm text-gray-600 dark:text-gray-400">Congestion</div>
                                                </div>
                                            </div>
                                            
                                            <div id="status-badge" class="inline-flex items-center px-4 py-2 rounded-full text-sm font-medium">
                                                <span id="status-emoji" class="mr-2">●</span>
                                                <span id="status-text">Low Congestion</span>
                                            </div>
                                        </div>

                                        <!-- Details -->
                                        <div class="space-y-4 mb-6">
                                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-[#3a3a3a] rounded-lg">
                                                <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Confidence</span>
                                                <span id="confidence-value" class="text-sm font-bold text-[#181411] dark:text-white">--%</span>
                                            </div>
                                            
                                            <div class="p-3 bg-gray-50 dark:bg-[#3a3a3a] rounded-lg">
                                                <div class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">Recommendations</div>
                                                <ul id="recommendations-list" class="text-sm text-[#181411] dark:text-white space-y-1">
                                                    <!-- Recommendations will be populated here -->
                                                </ul>
                                            </div>
                                        </div>

                                        <!-- Feedback Section -->
                                        <div id="feedback-section" class="border-t border-gray-200 dark:border-gray-600 pt-6">
                                            <h4 class="text-lg font-semibold text-[#181411] dark:text-white mb-4">Is this prediction accurate?</h4>
                                            <div class="grid grid-cols-3 gap-3 mb-4">
                                                <button onclick="submitFeedback('correct')" class="flex items-center justify-center px-4 py-2 bg-green-100 hover:bg-green-200 text-green-800 rounded-lg transition-colors">
                                                    <span class="mr-2">✓</span>
                                                    Accurate
                                                </button>
                                                <button onclick="submitFeedback('incorrect')" class="flex items-center justify-center px-4 py-2 bg-red-100 hover:bg-red-200 text-red-800 rounded-lg transition-colors">
                                                    <span class="mr-2">✗</span>
                                                    Inaccurate
                                                </button>
                                                <button onclick="submitFeedback('unknown')" class="flex items-center justify-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors">
                                                    <span class="mr-2">?</span>
                                                    Don't Know
                                                </button>
                                            </div>
                                            
                                            <div id="detailed-feedback" class="hidden mt-4">
                                                <label class="block text-sm font-medium text-[#181411] dark:text-white mb-2">What was the actual congestion level?</label>
                                                <input type="range" id="actual-congestion" min="0" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mb-2">
                                                <div class="flex justify-between text-xs text-gray-500 mb-3">
                                                    <span>0%</span>
                                                    <span id="actual-congestion-value">50%</span>
                                                    <span>100%</span>
                                                </div>
                                                <button onclick="submitDetailedFeedback()" class="w-full px-4 py-2 bg-[#f48733] hover:bg-[#e37527] text-white rounded-lg transition-colors">
                                                    Submit Correction
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Empty State -->
                                    <div id="empty-state" class="text-center py-12">
                                        <div class="w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-[#3a3a3a] rounded-full flex items-center justify-center">
                                            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                            </svg>
                                        </div>
                                        <h3 class="text-lg font-medium text-[#181411] dark:text-white mb-2">Ready to Predict</h3>
                                        <p class="text-gray-600 dark:text-gray-400">Fill in the form to get your traffic prediction</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Model Information Section -->
                        <div class="flex h-full flex-1 flex-col gap-4 rounded-xl bg-white dark:bg-[#2a2a2a] shadow-[0_0_4px_rgba(0,0,0,0.1)] dark:shadow-[0_0_8px_rgba(0,0,0,0.3)] mb-4 transition-colors duration-300">
                            <div class="p-4">
                                <h3 class="text-lg font-bold text-[#181411] dark:text-white mb-3">AI Model Performance</h3>
                                <div class="grid grid-cols-3 gap-4">
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-[#f48733] mb-1">99.2%</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">Accuracy</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-[#f48733] mb-1">±1.6%</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">Average Error</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-[#f48733] mb-1">389K</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400">Training Samples</div>
                                    </div>
                                </div>
                                <div class="mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                    <p class="text-xs text-blue-800 dark:text-blue-200">
                                        <strong>Technical Details:</strong> Random Forest model analyzing 17 factors including traffic volume, road capacity, weather conditions, and temporal patterns across 20 major Bengaluru areas.
                                    </p>
                                </div>
                            </div>
                        </div>
                                    <p class="text-sm text-blue-800 dark:text-blue-200">
                                        <strong>Technical Details:</strong> This Random Forest model analyzes 17 different factors including traffic volume, road capacity, weather conditions, and temporal patterns to predict congestion levels across 20 major areas in Bengaluru.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            
            <!-- Footer -->
            <footer class="flex justify-center bg-white dark:bg-[#1a1a1a] transition-colors duration-300">
                <div class="flex w-full flex-1 flex-col">
                    <footer class="flex flex-col gap-6 px-0 py-10 text-center @container">
                        <div class="flex flex-wrap items-center justify-center gap-6 @[480px]:flex-row @[480px]:justify-around">
                            <a class="text-[#8a7260] dark:text-gray-400 text-base font-normal leading-normal min-w-40 transition-colors duration-300" href="#">Open Source Project</a>
                        </div>
                        <div class="flex flex-wrap justify-center gap-4">
                            <a href="#" class="hover:opacity-75 transition-opacity">
                                <div class="text-[#8a7260] dark:text-gray-400 transition-colors duration-300" data-icon="GithubLogo" data-size="24px" data-weight="regular">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                                        <path
                                            d="M208.31,75.68A59.78,59.78,0,0,0,202.93,28,8,8,0,0,0,196,24a59.75,59.75,0,0,0-48,24H124A59.75,59.75,0,0,0,76,24a8,8,0,0,0-6.93,4,59.78,59.78,0,0,0-5.38,47.68A58.14,58.14,0,0,0,56,104v8a56.06,56.06,0,0,0,48.44,55.47A39.8,39.8,0,0,0,96,192v8H72a24,24,0,0,1-24-24A40,40,0,0,0,8,136a8,8,0,0,0,0,16,24,24,0,0,1,24,24,40,40,0,0,0,40,40H96v16a8,8,0,0,0,16,0V192a24,24,0,0,1,48,0v40a8,8,0,0,0,16,0V192a39.8,39.8,0,0,0-8.44-24.53A56.06,56.06,0,0,0,216,112v-8A58.14,58.14,0,0,0,208.31,75.68ZM200,112a40,40,0,0,1-40,40H112a40,40,0,0,1-40-40v-8a41.74,41.74,0,0,1,6.9-22.48A8,8,0,0,0,80,73.83a43.81,43.81,0,0,1,.79-33.58,43.88,43.88,0,0,1,32.32,20.06A8,8,0,0,0,119.82,64h32.35a8,8,0,0,0,6.74-3.69,43.87,43.87,0,0,1,32.32-20.06A43.81,43.81,0,0,1,192,73.83a8.09,8.09,0,0,0,1,7.65A41.72,41.72,0,0,1,200,104Z"
                                        ></path>
                                    </svg>
                                </div>
                            </a>
                            <a href="#" class="hover:opacity-75 transition-opacity">
                                <div class="text-[#8a7260] dark:text-gray-400 transition-colors duration-300" data-icon="LinkedinLogo" data-size="24px" data-weight="regular">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                                        <path
                                            d="M216,24H40A16,16,0,0,0,24,40V216a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V40A16,16,0,0,0,216,24Zm0,192H40V40H216V216ZM96,112v64a8,8,0,0,1-16,0V112a8,8,0,0,1,16,0Zm88,28v36a8,8,0,0,1-16,0V140a20,20,0,0,0-40,0v36a8,8,0,0,1-16,0V112a8,8,0,0,1,15.79-1.78A36,36,0,0,1,184,140ZM100,84A12,12,0,1,1,88,72,12,12,0,0,1,100,84Z"
                                        ></path>
                                    </svg>
                                </div>
                            </a>
                        </div>
                        <p class="text-[#8a7260] dark:text-gray-400 text-base font-normal leading-normal transition-colors duration-300">AI-powered traffic prediction system for Bengaluru. Contributions welcome.</p>
                    </footer>
                </div>
            </footer>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script>
        // Global variables
        let currentPredictionId = null;

        // Theme toggle functionality
        const themeToggleBtn = document.getElementById('theme-toggle');
        const html = document.documentElement;
        const themeIcon = document.getElementById('theme-icon');
        const sunIcon = document.getElementById('sun-icon');
        const moonIcon = document.getElementById('moon-icon');
        const themeText = document.getElementById('theme-text');

        function updateThemeIcon(isDark) {
            if (isDark) {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
                themeText.textContent = 'Light';
            } else {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
                themeText.textContent = 'Dark';
            }
        }

        // Initialize theme on page load
        const isDarkMode = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
        
        if (isDarkMode) {
            html.classList.add('dark');
        } else {
            html.classList.remove('dark');
        }
        
        updateThemeIcon(isDarkMode);

        // Toggle theme
        themeToggleBtn.addEventListener('click', () => {
            const isCurrentlyDark = html.classList.contains('dark');
            
            if (isCurrentlyDark) {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                updateThemeIcon(false);
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                updateThemeIcon(true);
            }
        });

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!('theme' in localStorage)) {
                if (e.matches) {
                    html.classList.add('dark');
                    updateThemeIcon(true);
                } else {
                    html.classList.remove('dark');
                    updateThemeIcon(false);
                }
            }
        });

        // Convert user-friendly inputs to technical parameters
        function convertUserInputsToTechnicalParams() {
            const timePeriod = document.querySelector('input[name="time_period"]:checked')?.value;
            const dayType = document.querySelector('input[name="day_type"]:checked')?.value;
            const area = document.getElementById('area').value;
            const road = document.getElementById('road').value;
            
            // Smart parameter mapping based on user selections
            let trafficVolume, avgSpeed, roadCapacity, dayOfWeek;
            
            // Classify road types for night traffic patterns
            const highways = ['Hosur Road', 'Ballari Road', 'International Airport Road', 'Outer Ring Road', 'ITPL Main Road', 'Tumkur Road'];
            const linkRoads = ['100 Feet Road', '27th Main Road', 'CMH Road', 'Sarjapur Road', 'BTM 2nd Stage', 'HSR Sector 1', 'Malleshwaram Circle', 'JP Nagar Metro Station', 'RT Nagar Main Road'];
            const junctions = ['Anil Kumble Circle', 'Sony World Junction', 'Silk Board Junction', 'Marathahalli Junction', 'Hebbal Flyover'];
            
            const isHighway = highways.includes(road);
            const isLinkRoad = linkRoads.includes(road);
            const isJunction = junctions.includes(road);
            
            // Map time period to realistic traffic patterns
            const timeMapping = {
                'morning': { baseVolume: 50000, baseSpeed: 28, baseCapacity: 90 },
                'afternoon': { baseVolume: 35000, baseSpeed: 45, baseCapacity: 70 },
                'evening': { baseVolume: 55000, baseSpeed: 25, baseCapacity: 95 },
                'night': { 
                    baseVolume: isHighway ? 8000 : (isJunction ? 5000 : 2000), 
                    baseSpeed: isHighway ? 65 : (isJunction ? 55 : 45), 
                    baseCapacity: isHighway ? 25 : (isJunction ? 20 : 15) 
                }
            };
            
            // Get base values
            const timeParams = timeMapping[timePeriod] || timeMapping['afternoon'];
            
            // Special night adjustments for realistic patterns
            if (timePeriod === 'night') {
                // Weekend nights have slightly more traffic (entertainment, late dining)
                const nightMultiplier = dayType === 'weekend' ? 1.3 : 1.0;
                
                // Commercial areas have minimal night traffic
                const commercialAreas = ['M.G. Road', 'Koramangala', 'Indiranagar', 'Malleshwaram'];
                const entertainmentAreas = ['Koramangala', 'Indiranagar', 'M.G. Road']; // Some nightlife
                
                let areaMultiplier = 1.0;
                if (commercialAreas.includes(area) && !entertainmentAreas.includes(area)) {
                    areaMultiplier = 0.5; // Very low traffic in pure commercial areas
                } else if (entertainmentAreas.includes(area) && dayType === 'weekend') {
                    areaMultiplier = 1.8; // Weekend nightlife traffic
                }
                
                // IT areas have virtually no night traffic except highways
                const itAreas = ['Electronic City', 'Whitefield', 'HSR Layout', 'Marathahalli'];
                if (itAreas.includes(area) && !isHighway) {
                    areaMultiplier = 0.3; // Minimal traffic in IT areas at night
                }
                
                // Residential areas have very low night traffic
                const residentialAreas = ['BTM Layout', 'Jayanagar', 'JP Nagar', 'Banashankari', 'RT Nagar', 'Basavanagudi', 'Vijayanagar'];
                if (residentialAreas.includes(area)) {
                    areaMultiplier = 0.4;
                }
                
                trafficVolume = Math.round(timeParams.baseVolume * nightMultiplier * areaMultiplier);
                avgSpeed = timeParams.baseSpeed;
                roadCapacity = Math.round(timeParams.baseCapacity * nightMultiplier * areaMultiplier);
                
            } else {
                // Day time traffic patterns (existing logic)
                const dayMultiplier = dayType === 'weekend' ? 0.7 : 1.0;
                const busyAreas = ['Koramangala', 'M.G. Road', 'Indiranagar', 'BTM Layout', 'HSR Layout'];
                const areaMultiplier = busyAreas.includes(area) ? 1.2 : 1.0;
                
                trafficVolume = Math.round(timeParams.baseVolume * dayMultiplier * areaMultiplier);
                avgSpeed = Math.round(timeParams.baseSpeed);
                roadCapacity = Math.round(timeParams.baseCapacity);
            }
            
            // Set day of week
            if (dayType === 'weekend') {
                dayOfWeek = Math.random() > 0.5 ? 5 : 6;
            } else {
                dayOfWeek = Math.floor(Math.random() * 5);
            }
            
            // Ensure realistic night values - very important!
            if (timePeriod === 'night') {
                trafficVolume = Math.max(1000, Math.min(12000, trafficVolume)); // Much lower max for night
                avgSpeed = Math.max(40, Math.min(75, avgSpeed)); // Higher speeds at night
                roadCapacity = Math.max(10, Math.min(30, roadCapacity)); // Much lower congestion
            } else {
                trafficVolume = Math.max(5000, Math.min(70000, trafficVolume));
                avgSpeed = Math.max(20, Math.min(90, avgSpeed));
                roadCapacity = Math.max(30, Math.min(100, roadCapacity));
            }
            
            // Set hidden inputs
            document.getElementById('traffic_volume').value = trafficVolume;
            document.getElementById('avg_speed').value = avgSpeed;
            document.getElementById('road_capacity').value = roadCapacity;
            document.getElementById('day_of_week').value = dayOfWeek;
            
            return { trafficVolume, avgSpeed, roadCapacity, dayOfWeek };
        }

        // Form submission
        document.getElementById('predictionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Convert user inputs to technical parameters
            convertUserInputsToTechnicalParams();
            
            // Show loading state
            document.getElementById('empty-state').classList.add('hidden');
            document.getElementById('results').classList.add('hidden');
            document.getElementById('loading').classList.remove('hidden');
            
            // Collect form data
            const formData = {
                area: document.getElementById('area').value,
                road: document.getElementById('road').value,
                traffic_volume: document.getElementById('traffic_volume').value,
                avg_speed: document.getElementById('avg_speed').value,
                road_capacity: document.getElementById('road_capacity').value,
                weather: document.querySelector('input[name="weather"]:checked').value,
                day_of_week: document.getElementById('day_of_week').value || null,
                incidents: 0
            };
            
            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                // Hide loading
                document.getElementById('loading').classList.add('hidden');
                
                if (result.status === 'success') {
                    displayResults(result);
                    currentPredictionId = result.prediction_id;
                } else {
                    showError(result.error || 'An error occurred');
                }
                
            } catch (error) {
                document.getElementById('loading').classList.add('hidden');
                showError('Network error: ' + error.message);
            }
        });

        function displayResults(result) {
            // Update prediction percentage
            document.getElementById('prediction-percentage').textContent = result.prediction + '%';
            
            // Update confidence
            document.getElementById('confidence-value').textContent = (result.confidence * 100).toFixed(0) + '%';
            
            // Update status badge
            const interpretation = result.interpretation;
            document.getElementById('status-emoji').textContent = getStatusSymbol(interpretation.level);
            document.getElementById('status-text').textContent = interpretation.level + ' - ' + interpretation.description;
            
            // Update status badge color
            const statusBadge = document.getElementById('status-badge');
            statusBadge.className = `inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ${interpretation.color} bg-gray-100 dark:bg-gray-700`;
            
            // Update congestion circle color
            const circle = document.getElementById('congestion-circle');
            const congestionLevel = parseFloat(result.prediction);
            let circleColor = '#10b981'; // green
            if (congestionLevel >= 75) circleColor = '#ef4444'; // red
            else if (congestionLevel >= 50) circleColor = '#f97316'; // orange
            else if (congestionLevel >= 25) circleColor = '#eab308'; // yellow
            
            circle.style.borderColor = circleColor;
            
            // Update recommendations
            const recommendationsList = document.getElementById('recommendations-list');
            recommendationsList.innerHTML = '';
            result.recommendations.forEach(rec => {
                const li = document.createElement('li');
                li.textContent = '• ' + rec;
                recommendationsList.appendChild(li);
            });
            
            // Show results
            document.getElementById('results').classList.remove('hidden');
        }

        function getStatusSymbol(level) {
            switch(level) {
                case 'Low': return '●';
                case 'Moderate': return '●';
                case 'High': return '●';
                case 'Very High': return '●';
                default: return '●';
            }
        }

        function showError(message) {
            document.getElementById('empty-state').classList.remove('hidden');
            document.querySelector('#empty-state h3').textContent = 'Prediction Error';
            document.querySelector('#empty-state p').textContent = message;
        }

        // Feedback functions
        async function submitFeedback(feedbackType) {
            if (!currentPredictionId) return;
            
            try {
                const response = await fetch('/feedback', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        prediction_id: currentPredictionId,
                        feedback: feedbackType
                    })
                });
                
                const result = await response.json();
                
                if (result.status === 'success') {
                    showFeedbackThankYou();
                    if (feedbackType === 'incorrect') {
                        document.getElementById('detailed-feedback').classList.remove('hidden');
                    }
                }
                
            } catch (error) {
                console.error('Feedback submission error:', error);
            }
        }

        async function submitDetailedFeedback() {
            if (!currentPredictionId) return;
            
            const actualCongestion = document.getElementById('actual-congestion').value;
            
            try {
                const response = await fetch('/feedback', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        prediction_id: currentPredictionId,
                        feedback: 'correction',
                        actual_congestion: parseFloat(actualCongestion)
                    })
                });
                
                const result = await response.json();
                
                if (result.status === 'success') {
                    showFeedbackThankYou();
                    document.getElementById('detailed-feedback').classList.add('hidden');
                }
                
            } catch (error) {
                console.error('Detailed feedback submission error:', error);
            }
        }

        function showFeedbackThankYou() {
            const feedbackSection = document.getElementById('feedback-section');
            feedbackSection.innerHTML = `
                <div class="text-center py-4">
                    <div class="text-green-600 text-2xl mb-2">✓</div>
                    <h4 class="text-lg font-semibold text-[#181411] dark:text-white mb-2">Thank you for your feedback!</h4>
                    <p class="text-gray-600 dark:text-gray-400">Your input helps us improve our predictions.</p>
                </div>
            `;
        }

        // Range slider for detailed feedback
        document.getElementById('actual-congestion').addEventListener('input', function() {
            document.getElementById('actual-congestion-value').textContent = this.value + '%';
        });
    </script>
</body>
</html>